CREATE DATABASE SPRINGDB;

CREATE TABLE USER_ROLE
(
ROLE_ID  VARCHAR(10) NOT NULL, 
ROLE_NAME VARCHAR(100),
DESCRIPTION VARCHAR(100),
CONSTRAINT  ROLE_ID_PK  PRIMARY KEY(ROLE_ID)
);  


CREATE TABLE SPRING_USER  
( USER_ID VARCHAR(50) NOT NULL PRIMARY KEY,  
FIRST_NAME VARCHAR(100), 
LAST_NAME VARCHAR(100),
ROLE_ID VARCHAR(10) NOT NULL,
CONSTRAINT  ROLE_ID_FK  FOREIGN KEY(ROLE_ID) REFERENCES USER_ROLE(ROLE_ID)
 );


CREATE TABLE PROCESS_ADMIN 
(PROCESS_ID VARCHAR(10) NOT NULL,  
USER_ID VARCHAR(50) NOT NULL,
CREATED_DATE DATE, 
CONSTRAINT PROCESS_PK PRIMARY KEY (PROCESS_ID),
CONSTRAINT  USER_ID_FK  FOREIGN KEY(USER_ID) REFERENCES SPRING_USER(USER_ID) 
); 


CREATE TABLE PROCESS_MASTER 
(PROCESS_ID VARCHAR(10) NOT NULL,  
PROCESS_NAME VARCHAR(100),  
 CONSTRAINT  PROCESS_ID_FK  FOREIGN KEY(PROCESS_ID) REFERENCES PROCESS_ADMIN(PROCESS_ID) 
);  




CREATE TABLE REQUEST_TYPE 
(REQUEST_TYPE_ID VARCHAR(50) NOT NULL PRIMARY KEY,  
REQUEST_NAME VARCHAR(100), 
PROCESS_ID VARCHAR(10) NOT NULL,
CONSTRAINT  PROCESS_FK  FOREIGN KEY(PROCESS_ID) REFERENCES PROCESS_ADMIN(PROCESS_ID)
 );
 


CREATE TABLE REQUEST_MASTER
(REQUEST_ID VARCHAR(50) NOT NULL PRIMARY KEY,  
REQUEST_TYPE_ID VARCHAR(50) NOT NULL,
REQUEST_NAME VARCHAR(100),  
DESCRIPTION VARCHAR(100),
CONSTRAINT Request_type_FK  FOREIGN KEY(REQUEST_TYPE_ID) REFERENCES REQUEST_TYPE(REQUEST_TYPE_ID)
); 



CREATE TABLE STATUS 
(STATUS_ID VARCHAR(20) NOT NULL,  
STATUS_NAME VARCHAR(100),  
 CONSTRAINT STATUS_PK PRIMARY KEY (STATUS_ID)  
); 



CREATE TABLE REQUEST_FLOW_DATA
(REQUEST_DATA_ID VARCHAR(50) NOT NULL, 
NAME VARCHAR(100), 
REQUEST_DATE DATE,
DUE_DATE DATE,
REQUEST_ID VARCHAR(50) NOT NULL,   
STATUS_ID VARCHAR(20) NOT NULL,
OBJECT_ID VARCHAR(20),
CONSTRAINT REQUEST_ID_FK  FOREIGN KEY(REQUEST_ID) REFERENCES REQUEST_MASTER (REQUEST_ID),
CONSTRAINT STATUS_ID_FK  FOREIGN KEY(STATUS_ID) REFERENCES STATUS (STATUS_ID)
); 



CREATE TABLE SHELL_OFFER
(PROJECT_ID VARCHAR(20) NOT NULL  PRIMARY KEY,  
OFFER_ID VARCHAR(100) NOT NULL
); 



CREATE TABLE PROJECT_MASTER
(PROJECT_ID VARCHAR(20) NOT NULL,
PROJECT_CODE VARCHAR(100), 
PROJECT_TYPE VARCHAR(50),
PROJECT_NAME VARCHAR(100),
PROJECT_DESC VARCHAR(100),   
PROJECT_START_DATE DATE,
PROJECT_END_DATE DATE,
CONSTRAINT PROJECT_ID_FK  FOREIGN KEY(PROJECT_ID) REFERENCES SHELL_OFFER(PROJECT_ID)
);


CREATE TABLE CAMPAIGN_MASTER
(CAMPAIGN_ID VARCHAR(20) NOT NULL PRIMARY KEY,
CAMPAIGN_CODE VARCHAR(100), 
CAMPAIGN_CATEGORY VARCHAR(50),
CAMPAIGN_NAME VARCHAR(100),  
CAMPAIGN_START_DATE DATE,
CAMPAIGN_END_DATE DATE
); 



CREATE TABLE OFFER_MASTER
(OFFER_ID VARCHAR(20) NOT NULL,
CAMPAIGN_ID VARCHAR(20) NOT NULL,
OFFER_CODE VARCHAR(50),
DESCRIPTION VARCHAR(500),  
START_DATE DATE,
END_DATE DATE,
CONSTRAINT CAMPAIGN_ID_FK  FOREIGN KEY(CAMPAIGN_ID) REFERENCES CAMPAIGN_MASTER(CAMPAIGN_ID)
); 

DROP table PROJECT_MASTER cascade constraints;

insert into USER_ROLE (ROLE_ID,ROLE_NAME,DESCRIPTION) values ("001","Marketing","Marketing");
insert into USER_ROLE (ROLE_ID,ROLE_NAME,DESCRIPTION) values ("002","Pricing Stratgy","Pricing Stratgy");
insert into USER_ROLE (ROLE_ID,ROLE_NAME,DESCRIPTION) values ("003","Pricing Operation","Pricing Operation");
insert into USER_ROLE (ROLE_ID,ROLE_NAME,DESCRIPTION) values ("004","ICOMS","ICOMS");
insert into USER_ROLE (ROLE_ID,ROLE_NAME,DESCRIPTION) values ("005","Pin-Point","Pin-Point");
insert into USER_ROLE (ROLE_ID,ROLE_NAME,DESCRIPTION) values ("006","OMC","OMC");

insert into SPRING_USER (USER_ID,FIRST_NAME,LAST_NAME,ROLE_ID) values("nitin","nitin","choube","001");
insert into SHELL_OFFER (PROJECT_ID,OFFER_ID) values('PRO101','offer1');

